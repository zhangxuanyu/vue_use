<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>vue test</title>
</head>
<body>
	<div id="app">
	  {{ message }}

		
		<div>	
		   <test-panel></test-panel>
	      <test-toast></test-toast>
		</div>
		
	</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
	const toggle = {
         data() {
           return {
             
           }
         },
         created(){
         	console.log('这是mixins,用来声明共同的方法，可以和vue组件一样，拥有相同的周期，函数，data，和其他处理，这样可以区别于一般的js方法')
         }
      }

   
	

	var componentPanel = {
	  data () {
	  return {
	      checkedNumber: ''
	    }
	  },
	  components: {
	  },
	  template:`<div id="panel">
					   <div class="number-panel">
					   <p v-show="checkedNumber.length>0" class="number-show">{{checkedNumber}}</p>
					   <p v-show="!checkedNumber" class="number-show">  </p>
					   <ul>
						 <li @click="clickThisNumber($event)" v-for="index in 9" :key="index">{{index}}</li>
						 <li @click="clickThisNumber($event)">0</li>
					   </ul>
					 </div>
				   </div>`,
	  methods: {
	    clickThisNumber (e) {
	      this.checkedNumber = this.checkedNumber.concat(e.currentTarget.innerHTML)
	    }
	  }
	}

	var componentToast = {
	  data () {
	    return {
	      text: '',
	      toastHidden: false
	    }
	  },
	  created () {
	    // this.toastPlugin()
	  },
	  components: {
	  },
	  template:`<div id="toast">
					  <div class="toast"  ref='toastPosition' :class="{active: toastHidden}">
					  <div class="toast-warpper">
						 {{text}}
					  </div>
					</div>
				  </div>`,
	  methods: {
	    toastPlugin (msg, time) {
	      this.text = msg
	      this.toastHidden = true
	      setTimeout(() => {
	        this.toastHidden = false
	      }, time)
	    }
	  }
	}


	let test = {}
	test.install = function (Vue, options) {
	  Vue.prototype.$msg = 'Hello I am test.js'
	  Vue.prototype.$myMethod = function (arr) {
	    if (arr.length < 0) {
	      return false
	    } else {
	      arr = arr.join('连接你我')
	      return arr
	    }
	  }
	  Vue.component('testPanel', componentPanel) // testPanel.name 组件的name属性
	  Vue.component('testToast', componentToast) // testPanel.name 组件的name属性
	}

	Vue.use(test)

	var app = new Vue({
	  el: '#app',
	  mixins: [toggle],
	  data: {
	    message: 'Hello Vue!'
	  },
	  created(){
		  console.log(this.$myMethod)
	  }
	})
</script>
</html>